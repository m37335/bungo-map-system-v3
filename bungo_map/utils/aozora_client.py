"""
青空文庫クライアント - シンプル動作版
文豪地図システム v3.0
"""

import hashlib


class AozoraClient:
    """青空文庫クライアント（動作確認版）"""
    
    def __init__(self):
        self.sample_texts = {
            "坊っちゃん": """親譲りの無鉄砲で小供の時から損ばかりしている。小学校に居る時分学校の二階から飛び降りて一週間ほど腰を抜かした事がある。
なぜそんな無闇をしたと聞く人があるかも知れぬ。別段深い理由でもない。新築の二階から首を出していたら、同級生の一人が冗談に、いくら威張っても、そこから飛び降りる事は出来まい。弱虫やーい。と囃したからである。

こう考えて東京を出発して、新橋から汽車に乗って、途中でだいぶ弱って、やっと松山まで来た時は、へとへとになった。
小倉で降りて、そこで乗り換えて、三時間ばかりで松山へ着く。松山は温泉で有名な所である。
道後温泉という名物がある。市内から汽車で二十分ほどで行かれる。温泉宿には文学者もよく泊まる。
正岡子規も学生時代にこの温泉に浸かったという。""",
            
            "羅生門": """ある日の暮方の事である。一人の下人が羅生門の下で雨やみを待っていた。
広い門の下には、この男のほかに誰もいない。ただ、所々丹塗の剥げた、大きな円柱に、蟋蟀が一匹とまっている。

羅生門が、朱雀大路にある以上は、この男のほかにも、雨やみを待っている人があってもよさそうなものである。
それが、この男の他には誰もいない。

何故かと云うと、この二三年、京都には、地震とか辻風とか火事とか饑饉とかいう災いがつづいて起った。
そこで洛中のさびれ方は一通りでない。旧記によると、仏像や仏具を打砕いて、
その丹がついたり、金銀の箔がついたりした木を、路ばたに積んで薪の料に売っていたという事である。

洛中がその始末であるから、羅生門の修理などは、元より誰も捨てて顧る者がなかった。""",
            
            "走れメロス": """メロスは激怒した。必ず、かの邪智暴虐の王を除かなければならぬと決意した。
メロスには政治がわからぬ。メロスは、村の牧人である。笛を吹き、羊と遊んで暮して来た。
けれども邪悪に対しては、人一倍に敏感であった。

きょう未明メロスは村を出発し、野を越え山越え、十里はなれた此のシラクスの市にやって来た。
妹の結婚式も間近かなので、祝いの品々を買い求める為である。

先ず、その日暮まで、シラクスの市の店という店をまわって、母への贈り物を買い、
妹への贈り物を買い、妹の婿への贈り物を買い、それから親戚の人たちへの贈り物を買って、
それから村の子供たちへの贈り物を買って、日が暮れてしまった。"""
        }
    
    def get_work_text(self, title, author):
        """作品テキストを取得（サンプル版）"""
        print(f"📖 テキスト取得: {title} by {author}")
        
        if title in self.sample_texts:
            text = self.sample_texts[title]
            print(f"   ✅ 取得成功: {len(text)} 文字")
            return text
        else:
            fallback_text = f"サンプルテキスト: {title} by {author}\n地名抽出テスト用の短いテキストです。東京、京都、大阪などの地名が含まれています。"
            print(f"   ⚠️ フォールバック使用")
            return fallback_text
    
    def calculate_content_hash(self, text):
        """テキストのハッシュ値計算"""
        return hashlib.md5(text.encode('utf-8')).hexdigest()
    
    def list_available_works(self):
        """利用可能な作品一覧"""
        return list(self.sample_texts.keys()) 